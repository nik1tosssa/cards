```
╔════════════════════════════════════════════════════════════════════════════╗
║                 ДЕКОМПОЗИЦИЯ ПРОЕКТА "СООТНЕСИ КАРТОЧКИ"                  ║
║                        Модульная архитектура v2.0                          ║
╚════════════════════════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────────────────────────┐
│                              СТАРАЯ ВЕРСИЯ                                │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  matches.html (580 строк кода)                                           │
│  ├── HTML разметка (80 строк)                                            │
│  ├── CSS стили (100 строк - встроено в <style>)                         │
│  └── JavaScript (400 строк - встроено в <script>)                        │
│      ├── Переменные состояния (30 строк)                                 │
│      ├── Функции таймера (40 строк)                                      │
│      ├── Функции карточек (50 строк)                                     │
│      ├── Обработчики Drag-and-Drop (100 строк)                          │
│      ├── UI функции (80 строк)                                           │
│      ├── Загрузка файлов (60 строк)                                      │
│      ├── Инициализация (40 строк)                                        │
│      └── Много глобальных переменных 😞                                   │
│                                                                            │
│  ❌ Трудно ориентироваться                                                │
│  ❌ Сложно тестировать                                                    │
│  ❌ Сложно расширять                                                      │
│  ✅ Работает сразу                                                        │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

                                    ⬇️ ДЕКОМПОЗИЦИЯ ⬇️

┌────────────────────────────────────────────────────────────────────────────┐
│                              НОВАЯ ВЕРСИЯ                                 │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  📄 СТРУКТУРА ФАЙЛОВ:                                                     │
│                                                                            │
│  cards/                                                                    │
│  │                                                                         │
│  ├── 🌐 HTML                                                              │
│  │   ├── index.html          (главная страница)                           │
│  │   └── pages/                                                           │
│  │       ├── matches/matches.html        (игра «Соотнеси карточки»)       │
│  │       └── fortune_wheel/fortune_wheel.html (игра «Колесо Фортуны»)     │
│  │                                                                         │
│  ├── 🎨 CSS                                                               │
│  │   └── styles.css          (вынутые стили)                             │
│  │                                                                         │
│  ├── 🔧 JAVASCRIPT МОДУЛИ (js/)                                          │
│  │   ├── game.js             (Главный контроллер) 🎮                     │
│  │   │   └─ инициализация и запуск                                       │
│  │   │                                                                     │
│  │   ├── gameState.js        (Состояние игры) 📊                         │
│  │   │   └─ счетчики, флаги, данные                                     │
│  │   │                                                                     │
│  │   ├── timer.js            (Таймер) ⏱️                                 │
│  │   │   └─ начало, стоп, форматирование                                 │
│  │   │                                                                     │
│  │   ├── cardManager.js      (Карточки) 🃏                               │
│  │   │   └─ создание, рендеринг, маркировка                              │
│  │   │                                                                     │
│  │   ├── dragDropHandler.js  (Перетаскивание) 👆                         │
│  │   │   └─ события drag/drop, логика совпадений                         │
│  │   │                                                                     │
│  │   ├── gameUI.js           (Интерфейс) 🖼️                             │
│  │   │   └─ обновления UI, модальные окна                                │
│  │   │                                                                     │
│  │   └── fileLoader.js       (Загрузка) 📂                               │
│  │       └─ JSON парсинг, валидация                                      │
│  │                                                                         │
│  └── 📚 ДОКУМЕНТАЦИЯ                                                      │
│      ├── README.md           (основная информация)                        │
│      ├── QUICKSTART.md       (быстрый старт) ⭐                          │
│      ├── ARCHITECTURE.md     (диаграммы и потоки)                        │
│      ├── USAGE.md            (подробные инструкции)                      │
│      ├── CHANGES.md          (что изменилось)                            │
│      └── INDEX.md            (индекс документации)                       │
│                                                                            │
│  ✅ Легко ориентироваться                                                 │
│  ✅ Легко тестировать                                                     │
│  ✅ Легко расширять                                                       │
│  ⚠️  Рекомендуется локальный сервер                                       │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                        ГРАФ ЗАВИСИМОСТЕЙ МОДУЛЕЙ                          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│                              game.js 🎮                                    │
│                                 │                                         │
│       ┌─────────────┬───────────┼──────────┬────────────┐                │
│       ▼             ▼           ▼          ▼            ▼                 │
│   gameState.js  timer.js    cardManager.js  gameUI.js fileLoader.js     │
│   📊             ⏱️          🃏             🖼️          📂               │
│   │              │           │              │            │               │
│   └──────────────┴─────┬─────┘──────────────┘            │               │
│                        ▼                                  ▼               │
│                  dragDropHandler.js                   (callbacks)        │
│                  👆 (perевод)                                           │
│                        │                                                 │
│                        └─────┬─────────────┬─────────────┐              │
│                              ▼             ▼             ▼              │
│                          gameState  gameUI.js  cardManager.js           │
│                                                                          │
│  Легенда:                                                               │
│  🎮 = главный контроллер (инициализирует все)                           │
│  📊 = состояние (читают все модули)                                     │
│  ⏱️ = таймер (независим, используется из dragDropHandler)             │
│  🃏 = карточки (создает DOM, используется в game.js)                   │
│  👆 = перетаскивание (обновляет gameState и UI)                        │
│  🖼️ = интерфейс (обновляет DOM)                                        │
│  📂 = загрузка (запускает game.js при загрузке файла)                   │
│                                                                          │
└────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                         СРАВНЕНИЕ МЕТРИК КОДА                             │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  Метрика                  │  Было   │  Стало   │  Изменение              │
│  ─────────────────────────┼─────────┼──────────┼─────────────            │
│  Общее количество файлов  │    1    │    10    │  +900%                  │
│  Строк кода в главном     │   580   │   ~100   │  -83%                   │
│  Максимум в одном модуле  │   580   │   ~110   │  -81%                   │
│  Глобальных переменных    │   15+   │    0     │  -100% ✅               │
│  Объектов-модулей         │    0    │    7     │  +700% ✅               │
│  Функций в модуль (макс)  │   20+   │    5     │  -75% ✅                │
│  Связанность кода         │   ⚠️    │   ✅     │  Улучшена               │
│  Повторное использование  │   ❌    │   ✅     │  Возможна                │
│  Тестируемость            │   ❌    │   ✅     │  Улучшена                │
│                                                                            │
│  ✅ = улучшение в сторону хорошего кода                                  │
│  ⚠️ = нейтрально                                                         │
│  ❌ = ограничение старой версии                                          │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                    ЖИЗНЕННЫЙ ЦИКЛ ИГРОВОЙ СЕССИИ                          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  1️⃣  ЗАГРУЗКА СТРАНИЦЫ                                                    │
│     └─ window.load event                                                 │
│        └─ GameController.init()                                          │
│           ├─ UIManager.init() (кэширование DOM)                          │
│           ├─ привязка обработчиков событий                               │
│           └─ GameController.startGame()                                  │
│                                                                            │
│  2️⃣  ИНИЦИАЛИЗАЦИЯ ИГРЫ                                                   │
│     └─ GameState.reset()                                                 │
│     └─ UIManager.resetUI()                                               │
│     └─ GameTimer.reset()                                                 │
│     └─ GameState.setCardData(data)                                       │
│     └─ CardManager.renderCards() → DOM                                   │
│     └─ GameTimer.start()                                                 │
│                                                                            │
│  3️⃣  ИГРОВОЙ ПРОЦЕСС                                                      │
│     ├─ Пользователь drag карточку                                        │
│     │  └─ DragDropHandler.handleDragStart()                              │
│     │  └─ GameState.draggedCardId = cardId                               │
│     │                                                                      │
│     ├─ Пользователь drop на определение                                  │
│     │  └─ DragDropHandler.handleDrop()                                   │
│     │     ├─ ЕСЛИ совпадение ✅                                           │
│     │     │  ├─ CardManager.markAsMatched()                              │
│     │     │  ├─ GameState.incrementMatched()                             │
│     │     │  ├─ UIManager.updateScore()                                  │
│     │     │  └─ Проверка: все ли совпадено?                              │
│     │     │     └─ ДА → UIManager.showGameStatusModal('win')             │
│     │     │          └─ GameTimer.stop()                                 │
│     │     │                                                               │
│     │     └─ ЕСЛИ ошибка ❌                                               │
│     │        ├─ GameState.incrementErrors()                              │
│     │        ├─ UIManager.updateErrorCount()                             │
│     │        ├─ CardManager.showError()                                  │
│     │        └─ Проверка: лимит ошибок достигнут?                       │
│     │           └─ ДА → UIManager.showGameStatusModal('game-over')       │
│     │               └─ GameTimer.stop()                                  │
│     │                                                                      │
│     └─ Таймер отсчитывает время                                          │
│        └─ GameTimer.timerInterval (каждую секунду)                       │
│           └─ UIManager.timerElement.textContent обновляется              │
│                                                                            │
│  4️⃣  ОКОНЧАНИЕ ИГРЫ                                                       │
│     └─ UIManager.showGameStatusModal(status)                             │
│        ├─ Показать итоги (время, ошибки, совпадения)                     │
│        └─ Кнопка "Играть ещё раз"                                        │
│                                                                            │
│  5️⃣  ПЕРЕЗАПУСК                                                           │
│     └─ Клик на кнопку "Начать заново"                                    │
│        └─ GameController.startGame() → к пункту 2️⃣                      │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                          СТРУКТУРА ДАННЫХ JSON                            │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  [                                                                        │
│    {                                                                      │
│      "id": 1,              ← уникальный идентификатор                    │
│      "type": "concept",    ← "concept" или "definition"                  │
│      "content": "HTML",    ← текст на карточке                           │
│      "matchId": 2          ← ID карточки, с которой совпадает            │
│    },                                                                     │
│    {                                                                      │
│      "id": 2,                                                             │
│      "type": "definition",                                                │
│      "content": "Язык разметки...",                                      │
│      "matchId": 1          ← должен ссылаться назад                      │
│    }                                                                      │
│    ...                                                                    │
│  ]                                                                        │
│                                                                            │
│  ⚠️  ПРАВИЛА:                                                             │
│  • Количество элементов ЧЕТНОЕ (поровну concept и definition)            │
│  • Каждый concept должен иметь соответствующий definition                │
│  • matchId устанавливает связь между ними (двусторонняя)                │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                           КЛАССЫ CSS И СОБЫТИЯ                            │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  КЛАССЫ CSS:                                                              │
│  • .card              - базовые стили для всех карточек                  │
│  • .concept           - синие карточки (перетаскиваемые)                 │
│  • .definition        - белые с пунктиром (цели)                         │
│  • .matched           - зелёные (совпавшие пары)                         │
│  • .drag-over         - жёлтые (при наведении)                           │
│  • .drag-error        - красные (при ошибке)                             │
│  • .opacity-50        - полупрозрачность при перетаскивании              │
│                                                                            │
│  СОБЫТИЯ:                                                                 │
│  dragstart    → handleDragStart()     (начало перетаскивания)             │
│  dragover     → handleDragOver()      (над целью)                         │
│  dragenter    → handleDragEnter()     (вход в зону)                       │
│  dragleave    → handleDragLeave()     (выход из зоны)                     │
│  drop         → handleDrop()          (сброс)                             │
│  change       → handleFileLoad()      (выбор файла)                       │
│  click        → startGame()           (кнопка перезапуска)                │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

╔════════════════════════════════════════════════════════════════════════════╗
║                                                                            ║
║  ✨ ДЕКОМПОЗИЦИЯ ЗАВЕРШЕНА! ✨                                             ║
║                                                                            ║
║  Проект теперь имеет:                                                     ║
║  ✅ Модульную архитектуру                                                 ║
║  ✅ Чистый и организованный код                                           ║
║  ✅ Полную документацию                                                   ║
║  ✅ Примеры использования                                                 ║
║  ✅ Сохранённую функциональность                                          ║
║                                                                            ║
║  Начните с: QUICKSTART.md 📖                                              ║
║                                                                            ║
╚════════════════════════════════════════════════════════════════════════════╝
```
